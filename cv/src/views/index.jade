doctype html
html(lang="en" ng-app="cv")
  head
    meta(charset="utf-8")
    meta(http-equiv="X-UA-Compatible" content="IE=edge,chrome=1")
    meta(name="description" content="")
    meta(name="author" content="")
    meta(name="viewport" content="width=device-width")
    title Curriculum Vitae: Jaco Greeff
    link(rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css")
    link(rel="stylesheet" type="text/css" href="client.css")
    style .ng-cloak { display: none }
    
  body.ng-cloak(ng-controller="cvController as cv")
    .positions
      .position(ng-repeat="pos in cv.positions" ng-class="{ 'hide': cv.entry && cv.entry != pos }")
        .summary(ng-click="cv.show(pos)")
          .action.fa(ng-class="{ 'fa-external-link-square': cv.entry != pos, 'fa-times': cv.entry == pos }")
          .title {{pos.position}}
          .company {{pos.company}}
          .location {{pos.location}}
          .fromto  {{cv.getDate(pos)}}
    
    .expanded(ng-click="cv.show()" ng-class="{ 'show': cv.entry }")
      .section(ng-repeat="(name, description) in cv.sections" ng-if="(cv.entry || cv.prevEntry).description[name]")
        .header {{description}}
        .text(markdown="(cv.entry || cv.prevEntry).description[name]")
      
    script.
      if (window.location.host.substr(-10) == '.github.io' && window.location.protocol != 'https:') {
          window.location.protocol = 'https:';
      }
    
    script(src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.4.8/angular.min.js")
    script(src="https://cdnjs.cloudflare.com/ajax/libs/angular-sanitize/1.4.8/angular-sanitize.min.js")
    script(src="https://cdnjs.cloudflare.com/ajax/libs/showdown/1.3.0/showdown.min.js")
    script(src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/3.10.1/lodash.min.js")
      
    script(src="client.js")
